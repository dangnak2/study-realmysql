#2주차 : 설치와 설정

## 엔터프라이즈 vs 커뮤니티

- 초기 -> 기술 지원의 차이
- 5.5 버전 이후 -> 엔터프라이즈와 커뮤니티 버전의 에디션 기능 차이 발생(소스코드 변경)
- 이후 엔터프라이즈 에디션의 소스코드 공개x

## mysql 기본 파일 경로

- C:\ProgramData\MySQL\MySQLServer8.0\Data\my.ini

## 초기 데이터 파일 & 트랜잭션 로그 파일

- 명령어 : mysqld --defaults-file=/etc/my.cnf--initialize-insecure
- --initialize-insecure : 초기 데이터파일 + 로그파일 생성 및 root 유저 생성
- 에러로그 파일 기본경로 : /var /1og/mysqld.log

## MySQL 서버 업그레이드 방법 2가지

- MySQL 서버의 데이터 파일을 그대로 두고 업그래이드 하는 방법
- 서버의 데이터를 SQL문장이나 텍스트 파일로 덤프한 후, 새로 업그레이드된 버전의 MySQL 서버에서 덤프된 데이터를 적재하는 방법

## 인플레이스 업그레이드 제약사항 (마이너 버전 간 업그레이드 vs 메이저 버전 간 업그레이드)

- 마이너 버전간 업그레이드는 대부분 파일 변경x, 여러 버전 건너뛰기 o
- ex) 8.0.16 -> 8.0.21 (MySQL 서버 프로그램만 재설치)

- 메이저 버전간 업그레이드는 대부분 크고 작은 데이터 파일의 변경이 필요하기 때문에 **직전 버전**에서만 업그레이드 허용
- ex) 5.5 -> 5.6 가능, 5.5 -> 5.7 or 8.0 **불가능**
- 메이저 버전은 데이터 파일의 패치가 필요한데 MySQL 8.0 서버 프로그램은 직전 버전(5.7)에서 사용하던 파일과 로그 포맷만 인식

## MySQL 8.0 업그레이드 고려사항

- 직전 버전인 5.7에 비해서 상당히 많은 기능들이 개선되거나 변경됨 
- 사용자 인증 방식 변경
- MySQL 8.0과 호환성 체크 (mysqlcheck 유틸리티 이용)
- 외래키 이름의 길이
- 인덱스 힌트
- GROUP BY에 사용된 정렬 옵션
- 파이션을 위한 공용 테이블스페이스

## 서버 설정

- MySQL은 단 하나의 설정 파일을 사용함
- Unix : my.cnf, Windows: my.ini
- 서버가 시작될 때 이 파일을 참조함
- 이 설정 파일의 경로는 고정되어있지 않음, 서버가 시작될 때 여러개의 디렉토리를 순차적으로 탐색하면서 처음 발견된 파일을 사용함
- MySQL은 단 하나의 설정 파일을 사용하지만 설정파일이 여러곳에 위치했을 때 혼란이 있을 수 있음
- 이 때 mysql --verbose --help 명령어를 사용하면 서버가 어느 디렉토리에 있는 파일을 먼저 읽는지 확인 가능함

## MySQL 시스템 변수

- 서버는 가동하면서 설정파일을 읽어 메모리나 작동방식을 초기화하고, 접속된 사용자를 제어하기 위해 시스템 변수를 저장함
- SHOW VARIABLES 명령어를 이용해서 시스템 변수를 조회할 수 있음

- 시스템 변수는 적용범위에 따라 글로벌 변수와 세션 변수로 나뉨
- 글로벌 변수 : 서버 인스턴스에 전체적으로 영향을 미침, 주로 서버 자체에 관련된 설정에 사용됨
- 세션 변수 : 클라이언트가 MySQL서버에 접속할 때 기본으로 부여하는 옵션의 기본값을 제어하는 데 사용됨

## 시스템변수 (정적 변수와 동적 변수)

- MySQL 서버가 가동중인 상태에서 시스템변수가 변경 가능한지에 따라 동적 변수와 정적 변수로 구분됨
- 디스크에 저장된 설정 파일의 내용을 변경하더라도 서버를 재시작 하기 전에는 적용되지 않음
- SHOW : 서버에 적용된 변숫값을 확인 
- SET : 변수 값을 변경
- LIKE : 변수명을 정확히 모른다면 %문자를 이용해 패턴 검색

- 동적 변수는 서버를 재시동하지 않고 SET 명령어를 통해 변경 가능
- 하지만 설정 파일에 변경 내용이 기록되진 않음
- 설정 파일까지 내용을 변경하려면 SET **PERSIST**를 사용해야함
